
process TEST =
{

#  include "FWCore/MessageLogger/data/MessageLogger.cfi"
   service = MessageLogger {
          untracked vstring destinations = { "cout" }
          untracked vstring debugModules = { "*" }
          untracked PSet debug.txt = {
                        untracked string threshold = "DEBUG"
          }
        }

      source = EmptyIOVSource {
          string timetype = "runnumber"
          untracked uint32 firstRun = 1
	  untracked uint32 lastRun = 1
          uint32 interval = 1
        }


es_source = EcalTrivialConditionRetriever {
       untracked bool producedEcalWeights = true
       untracked bool producedEcalPedestals = true
       untracked bool producedEcalIntercalibConstants = true
       untracked bool producedEcalGainRatios = true
       untracked bool producedEcalADCToGeVConstant = true
       untracked bool weightsForTB = false

#       If set true reading optimized weights (3+5 weights) from file untracked bool getWeightsFromFile = true

#       Values to get correct noise on RecHit amplitude using 3+5 weights
#       untracked double EBpedRMSX12 = 1.26
#       untracked double EEpedRMSX12 = 2.87

}

    include "CondCore/DBCommon/data/CondDBCommon.cfi"

# to write in sqlite
    replace CondDBCommon.connect = "sqlite_file:DB.db"    
    replace CondDBCommon.catalog = "file:PoolFileCatalog_DB.xml"

# to write into int2r_orcoff
#    replace CondDBCommon.connect = "oracle://cms_orcoff_int2r/CMS_COND_ECAL"
#    replace CondDBCommon.catalog = "relationalcatalog_oracle://cms_orcoff_int2r/CMS_COND_GENERAL"
#    replace CondDBCommon.DBParameters.authenticationPath="/afs/cern.ch/cms/DB/conddb"    

    service = PoolDBOutputService
    {
        using CondDBCommon
         VPSet toPut = { 
            { 
               string record = "EcalPedestalsRcd" 
               string tag = "EcalPedestals_trivial" 
            },
            { 
               string record = "EcalADCToGeVConstantRcd" 
               string tag = "EcalADCToGeVConstant_trivial" 
            },
            { 
               string record = "EcalIntercalibConstantsRcd" 
               string tag = "EcalIntercalibConstants_trivial" 
            },
            { 
               string record = "EcalGainRatiosRcd" 
               string tag = "EcalGainRatios_trivial" 
            },
            { 
               string record = "EcalWeightXtalGroupsRcd" 
               string tag = "EcalWeightXtalGroups_trivial" 
            },
            { 
               string record = "EcalTBWeightsRcd" 
               string tag = "EcalTBWeights_trivial" 
            }
   
	}

    }

    module dbCopy = EcalDBCopy
    {
        string timetype = "runnumber"
        VPSet toCopy=
        {
           {
               string container = "EcalPedestals"
               string record = "EcalPedestalsRcd"
           },
            {
                string container = "EcalADCToGeVConstant"
                string record = "EcalADCToGeVConstantRcd"
            },
            {
                string container = "EcalIntercalibConstants"
                string record = "EcalIntercalibConstantsRcd"
            },
            {
                string container = "EcalGainRatios"
                string record = "EcalGainRatiosRcd"
            },
            {
               string container = "EcalWeightXtalGroups"
               string record = "EcalWeightXtalGroupsRcd"
            },
            {
                string container = "EcalTBWeights"
                string record = "EcalTBWeightsRcd"
            }
        }
    }

  module prod = EcalTrivialObjectAnalyzer{}

   path p = { prod, dbCopy}

}
